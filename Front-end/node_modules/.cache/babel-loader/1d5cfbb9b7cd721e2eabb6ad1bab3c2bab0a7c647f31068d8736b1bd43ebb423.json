{"ast":null,"code":"class LangflowClient {\n  constructor(baseURL, applicationToken) {\n    this.baseURL = baseURL;\n    this.applicationToken = applicationToken;\n  }\n  async post(endpoint, body) {\n    let headers = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {\n      \"Content-Type\": \"application/json\"\n    };\n    headers[\"Authorization\"] = `Bearer ${this.applicationToken}`;\n    headers[\"Content-Type\"] = \"application/json\";\n    const url = `${this.baseURL}${endpoint}`;\n    try {\n      const response = await fetch(url, {\n        method: 'POST',\n        headers: headers,\n        body: JSON.stringify(body)\n        //mode: 'no-cors'\n      });\n\n      const responseMessage = await response.json();\n      if (!response.ok) {\n        throw new Error(`${response.status} ${response.statusText} - ${JSON.stringify(responseMessage)}`);\n      }\n      return responseMessage;\n    } catch (error) {\n      console.error('Request Error:', error.message);\n      throw error;\n    }\n  }\n  async initiateSession(flowId, langflowId, inputValue) {\n    let inputType = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'chat';\n    let outputType = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 'chat';\n    let stream = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : false;\n    let tweaks = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : {};\n    const endpoint = `/lf/${langflowId}/api/v1/run/${flowId}?stream=${stream}`;\n    return this.post(endpoint, {\n      input_value: inputValue,\n      input_type: inputType,\n      output_type: outputType,\n      tweaks: tweaks\n    });\n  }\n  handleStream(streamUrl, onUpdate, onClose, onError) {\n    const eventSource = new EventSource(streamUrl);\n    eventSource.onmessage = event => {\n      const data = JSON.parse(event.data);\n      onUpdate(data);\n    };\n    eventSource.onerror = event => {\n      console.error('Stream Error:', event);\n      onError(event);\n      eventSource.close();\n    };\n    eventSource.addEventListener(\"close\", () => {\n      onClose('Stream closed');\n      eventSource.close();\n    });\n    return eventSource;\n  }\n  async runFlow(flowIdOrName, langflowId, inputValue) {\n    let inputType = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'chat';\n    let outputType = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : 'chat';\n    let tweaks = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : {};\n    let stream = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : false;\n    let onUpdate = arguments.length > 7 ? arguments[7] : undefined;\n    let onClose = arguments.length > 8 ? arguments[8] : undefined;\n    let onError = arguments.length > 9 ? arguments[9] : undefined;\n    try {\n      const initResponse = await this.initiateSession(flowIdOrName, langflowId, inputValue, inputType, outputType, stream, tweaks);\n      console.log('Init Response:', initResponse);\n      if (stream && initResponse && initResponse.outputs && initResponse.outputs[0].outputs[0].artifacts.stream_url) {\n        const streamUrl = initResponse.outputs[0].outputs[0].artifacts.stream_url;\n        console.log(`Streaming from: ${streamUrl}`);\n        this.handleStream(streamUrl, onUpdate, onClose, onError);\n      }\n      return initResponse;\n    } catch (error) {\n      console.error('Error running flow:', error);\n      onError('Error initiating session');\n    }\n  }\n}","map":{"version":3,"names":["LangflowClient","constructor","baseURL","applicationToken","post","endpoint","body","headers","arguments","length","undefined","url","response","fetch","method","JSON","stringify","responseMessage","json","ok","Error","status","statusText","error","console","message","initiateSession","flowId","langflowId","inputValue","inputType","outputType","stream","tweaks","input_value","input_type","output_type","handleStream","streamUrl","onUpdate","onClose","onError","eventSource","EventSource","onmessage","event","data","parse","onerror","close","addEventListener","runFlow","flowIdOrName","initResponse","log","outputs","artifacts","stream_url"],"sources":["/Users/davidpessoa/Documents/Faculdade/Lab. Engenharia de Software/ProjectTemis/Front-end/src/LangflowClient.js"],"sourcesContent":["class LangflowClient {\n    constructor(baseURL, applicationToken) {\n        this.baseURL = baseURL;\n        this.applicationToken = applicationToken;\n    }\n    async post(endpoint, body, headers = {\"Content-Type\": \"application/json\"}) {\n        headers[\"Authorization\"] = `Bearer ${this.applicationToken}`;\n        headers[\"Content-Type\"] = \"application/json\";\n        const url = `${this.baseURL}${endpoint}`;\n        try {\n            const response = await fetch(url, {\n                method: 'POST',\n                headers: headers,\n                body: JSON.stringify(body)\n                //mode: 'no-cors'\n            });\n\n            const responseMessage = await response.json();\n            if (!response.ok) {\n                throw new Error(`${response.status} ${response.statusText} - ${JSON.stringify(responseMessage)}`);\n            }\n            return responseMessage;\n        } catch (error) {\n            console.error('Request Error:', error.message);\n            throw error;\n        }\n    }\n\n    async initiateSession(flowId, langflowId, inputValue, inputType = 'chat', outputType = 'chat', stream = false, tweaks = {}) {\n        const endpoint = `/lf/${langflowId}/api/v1/run/${flowId}?stream=${stream}`;\n        return this.post(endpoint, { input_value: inputValue, input_type: inputType, output_type: outputType, tweaks: tweaks });\n    }\n\n    handleStream(streamUrl, onUpdate, onClose, onError) {\n        const eventSource = new EventSource(streamUrl);\n\n        eventSource.onmessage = event => {\n            const data = JSON.parse(event.data);\n            onUpdate(data);\n        };\n\n        eventSource.onerror = event => {\n            console.error('Stream Error:', event);\n            onError(event);\n            eventSource.close();\n        };\n\n        eventSource.addEventListener(\"close\", () => {\n            onClose('Stream closed');\n            eventSource.close();\n        });\n\n        return eventSource;\n    }\n\n    async runFlow(flowIdOrName, langflowId, inputValue, inputType = 'chat', outputType = 'chat', tweaks = {}, stream = false, onUpdate, onClose, onError) {\n        try {\n            const initResponse = await this.initiateSession(flowIdOrName, langflowId, inputValue, inputType, outputType, stream, tweaks);\n            console.log('Init Response:', initResponse);\n            if (stream && initResponse && initResponse.outputs && initResponse.outputs[0].outputs[0].artifacts.stream_url) {\n                const streamUrl = initResponse.outputs[0].outputs[0].artifacts.stream_url;\n                console.log(`Streaming from: ${streamUrl}`);\n                this.handleStream(streamUrl, onUpdate, onClose, onError);\n            }\n            return initResponse;\n        } catch (error) {\n            console.error('Error running flow:', error);\n            onError('Error initiating session');\n        }\n    }\n}"],"mappings":"AAAA,MAAMA,cAAc,CAAC;EACjBC,WAAWA,CAACC,OAAO,EAAEC,gBAAgB,EAAE;IACnC,IAAI,CAACD,OAAO,GAAGA,OAAO;IACtB,IAAI,CAACC,gBAAgB,GAAGA,gBAAgB;EAC5C;EACA,MAAMC,IAAIA,CAACC,QAAQ,EAAEC,IAAI,EAAkD;IAAA,IAAhDC,OAAO,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG;MAAC,cAAc,EAAE;IAAkB,CAAC;IACrED,OAAO,CAAC,eAAe,CAAC,GAAI,UAAS,IAAI,CAACJ,gBAAiB,EAAC;IAC5DI,OAAO,CAAC,cAAc,CAAC,GAAG,kBAAkB;IAC5C,MAAMI,GAAG,GAAI,GAAE,IAAI,CAACT,OAAQ,GAAEG,QAAS,EAAC;IACxC,IAAI;MACA,MAAMO,QAAQ,GAAG,MAAMC,KAAK,CAACF,GAAG,EAAE;QAC9BG,MAAM,EAAE,MAAM;QACdP,OAAO,EAAEA,OAAO;QAChBD,IAAI,EAAES,IAAI,CAACC,SAAS,CAACV,IAAI;QACzB;MACJ,CAAC,CAAC;;MAEF,MAAMW,eAAe,GAAG,MAAML,QAAQ,CAACM,IAAI,CAAC,CAAC;MAC7C,IAAI,CAACN,QAAQ,CAACO,EAAE,EAAE;QACd,MAAM,IAAIC,KAAK,CAAE,GAAER,QAAQ,CAACS,MAAO,IAAGT,QAAQ,CAACU,UAAW,MAAKP,IAAI,CAACC,SAAS,CAACC,eAAe,CAAE,EAAC,CAAC;MACrG;MACA,OAAOA,eAAe;IAC1B,CAAC,CAAC,OAAOM,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,gBAAgB,EAAEA,KAAK,CAACE,OAAO,CAAC;MAC9C,MAAMF,KAAK;IACf;EACJ;EAEA,MAAMG,eAAeA,CAACC,MAAM,EAAEC,UAAU,EAAEC,UAAU,EAAwE;IAAA,IAAtEC,SAAS,GAAAtB,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,MAAM;IAAA,IAAEuB,UAAU,GAAAvB,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,MAAM;IAAA,IAAEwB,MAAM,GAAAxB,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,KAAK;IAAA,IAAEyB,MAAM,GAAAzB,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;IACtH,MAAMH,QAAQ,GAAI,OAAMuB,UAAW,eAAcD,MAAO,WAAUK,MAAO,EAAC;IAC1E,OAAO,IAAI,CAAC5B,IAAI,CAACC,QAAQ,EAAE;MAAE6B,WAAW,EAAEL,UAAU;MAAEM,UAAU,EAAEL,SAAS;MAAEM,WAAW,EAAEL,UAAU;MAAEE,MAAM,EAAEA;IAAO,CAAC,CAAC;EAC3H;EAEAI,YAAYA,CAACC,SAAS,EAAEC,QAAQ,EAAEC,OAAO,EAAEC,OAAO,EAAE;IAChD,MAAMC,WAAW,GAAG,IAAIC,WAAW,CAACL,SAAS,CAAC;IAE9CI,WAAW,CAACE,SAAS,GAAGC,KAAK,IAAI;MAC7B,MAAMC,IAAI,GAAG/B,IAAI,CAACgC,KAAK,CAACF,KAAK,CAACC,IAAI,CAAC;MACnCP,QAAQ,CAACO,IAAI,CAAC;IAClB,CAAC;IAEDJ,WAAW,CAACM,OAAO,GAAGH,KAAK,IAAI;MAC3BrB,OAAO,CAACD,KAAK,CAAC,eAAe,EAAEsB,KAAK,CAAC;MACrCJ,OAAO,CAACI,KAAK,CAAC;MACdH,WAAW,CAACO,KAAK,CAAC,CAAC;IACvB,CAAC;IAEDP,WAAW,CAACQ,gBAAgB,CAAC,OAAO,EAAE,MAAM;MACxCV,OAAO,CAAC,eAAe,CAAC;MACxBE,WAAW,CAACO,KAAK,CAAC,CAAC;IACvB,CAAC,CAAC;IAEF,OAAOP,WAAW;EACtB;EAEA,MAAMS,OAAOA,CAACC,YAAY,EAAExB,UAAU,EAAEC,UAAU,EAAoG;IAAA,IAAlGC,SAAS,GAAAtB,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,MAAM;IAAA,IAAEuB,UAAU,GAAAvB,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,MAAM;IAAA,IAAEyB,MAAM,GAAAzB,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC,CAAC;IAAA,IAAEwB,MAAM,GAAAxB,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,KAAK;IAAA,IAAE+B,QAAQ,GAAA/B,SAAA,CAAAC,MAAA,OAAAD,SAAA,MAAAE,SAAA;IAAA,IAAE8B,OAAO,GAAAhC,SAAA,CAAAC,MAAA,OAAAD,SAAA,MAAAE,SAAA;IAAA,IAAE+B,OAAO,GAAAjC,SAAA,CAAAC,MAAA,OAAAD,SAAA,MAAAE,SAAA;IAChJ,IAAI;MACA,MAAM2C,YAAY,GAAG,MAAM,IAAI,CAAC3B,eAAe,CAAC0B,YAAY,EAAExB,UAAU,EAAEC,UAAU,EAAEC,SAAS,EAAEC,UAAU,EAAEC,MAAM,EAAEC,MAAM,CAAC;MAC5HT,OAAO,CAAC8B,GAAG,CAAC,gBAAgB,EAAED,YAAY,CAAC;MAC3C,IAAIrB,MAAM,IAAIqB,YAAY,IAAIA,YAAY,CAACE,OAAO,IAAIF,YAAY,CAACE,OAAO,CAAC,CAAC,CAAC,CAACA,OAAO,CAAC,CAAC,CAAC,CAACC,SAAS,CAACC,UAAU,EAAE;QAC3G,MAAMnB,SAAS,GAAGe,YAAY,CAACE,OAAO,CAAC,CAAC,CAAC,CAACA,OAAO,CAAC,CAAC,CAAC,CAACC,SAAS,CAACC,UAAU;QACzEjC,OAAO,CAAC8B,GAAG,CAAE,mBAAkBhB,SAAU,EAAC,CAAC;QAC3C,IAAI,CAACD,YAAY,CAACC,SAAS,EAAEC,QAAQ,EAAEC,OAAO,EAAEC,OAAO,CAAC;MAC5D;MACA,OAAOY,YAAY;IACvB,CAAC,CAAC,OAAO9B,KAAK,EAAE;MACZC,OAAO,CAACD,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;MAC3CkB,OAAO,CAAC,0BAA0B,CAAC;IACvC;EACJ;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}